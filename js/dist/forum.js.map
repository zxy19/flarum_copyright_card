{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@xypp/flarum-copyright-card/./src/common/config.ts","webpack://@xypp/flarum-copyright-card/./src/common/index.ts","webpack://@xypp/flarum-copyright-card/./src/forum/addCopyrightComponent.tsx","webpack://@xypp/flarum-copyright-card/./src/forum/addDiscussion.tsx","webpack://@xypp/flarum-copyright-card/./src/forum/components/CopyrightCard.tsx","webpack://@xypp/flarum-copyright-card/./src/forum/components/CopyrightConfigModal.tsx","webpack://@xypp/flarum-copyright-card/./src/forum/components/CopyrightPiece.tsx","webpack://@xypp/flarum-copyright-card/./src/forum/components/CopyrightPieceConfigModal.tsx","webpack://@xypp/flarum-copyright-card/./src/forum/index.ts","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['common/Component']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['common/app']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['common/components/Button']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['common/components/Select']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['common/extend']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['forum/app']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@xypp/flarum-copyright-card/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@xypp/flarum-copyright-card/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@xypp/flarum-copyright-card/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@xypp/flarum-copyright-card/webpack/bootstrap","webpack://@xypp/flarum-copyright-card/webpack/runtime/compat get default export","webpack://@xypp/flarum-copyright-card/webpack/runtime/define property getters","webpack://@xypp/flarum-copyright-card/webpack/runtime/hasOwnProperty shorthand","webpack://@xypp/flarum-copyright-card/webpack/runtime/make namespace object","webpack://@xypp/flarum-copyright-card/./forum.ts"],"sourcesContent":["export enum COPYRIGHT_KEYS {\r\n    url = \"url\",\r\n    title = \"title\",\r\n    author = \"author\",\r\n    license = \"license\"\r\n}\r\n\r\nexport enum COPYRIGHT_TYPE {\r\n    original = \"original\",\r\n    translation = \"translation\",\r\n    transport = \"transport\",\r\n    modify = \"modify\",\r\n    revive = \"revive\",\r\n}\r\n\r\nexport type COPYRIGHT_DATA = Partial<Record<COPYRIGHT_KEYS, string>> & {\r\n    type: COPYRIGHT_TYPE;\r\n}","import app from 'flarum/common/app';\n\napp.initializers.add('xypp/flarum-copyright-card', () => {\n  console.log('[xypp/flarum-copyright-card] Hello, forum and admin!');\n});\n","import app from 'flarum/forum/app';\r\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\r\nimport { extend } from 'flarum/common/extend';\r\nimport Button from 'flarum/common/components/Button';\r\nimport CopyrightConfigModal from './components/CopyrightConfigModal';\r\nimport { COPYRIGHT_DATA, COPYRIGHT_TYPE } from '../common/config';\r\nimport ComposerBody from 'flarum/forum/components/ComposerBody';\r\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\r\nimport Model from 'flarum/common/Model';\r\nimport classList from 'flarum/common/utils/classList';\r\nfunction makeComposerBountyInput(composer: ComposerBody) {\r\n    return () => {\r\n        app.modal.show(CopyrightConfigModal, {\r\n            value: composer.composer.fields.copyright,\r\n            onchange: (copyright: { current: COPYRIGHT_TYPE, all: COPYRIGHT_DATA[] } | null) => {\r\n                if (!copyright)\r\n                    delete composer.composer.fields.copyright;\r\n                else\r\n                    composer.composer.fields.copyright = copyright;\r\n            }\r\n        },true);\r\n    };\r\n}\r\nexport default function addDiscussionAction() {\r\n    extend(DiscussionControls, 'moderationControls', function (items, discussion) {\r\n        if (discussion.attribute(\"xypp-copyright.edit\")) {\r\n            items.add('xypp-copyright', Button.component({\r\n                icon: 'fas fa-copyright',\r\n                className: 'Button Button--link',\r\n                onclick: () => {\r\n                    app.modal.show(CopyrightConfigModal, {\r\n                        value: discussion.attribute(\"copyright\"),\r\n                        onchange: (copyright: { current: COPYRIGHT_TYPE, all: COPYRIGHT_DATA[] } | null) => {\r\n                            discussion.save({\r\n                                copyright: copyright\r\n                            });\r\n                        }\r\n                    },true);\r\n                }\r\n            },\r\n                app.translator.trans('xypp-copyright-card.forum.select-copyright'))\r\n            )\r\n        }\r\n    });\r\n\r\n    extend(DiscussionComposer.prototype, 'headerItems', function (this: ComposerBody, items) {\r\n        const canSet = !!(\r\n            this.composer.fields.tags\r\n            &&\r\n            this.composer.fields.tags.find((e: Model) => e.attribute<boolean>(\"xypp-copyright.edit\"))\r\n        );\r\n\r\n        if (canSet) {\r\n            items.add(\r\n                'copyright',\r\n                <a className=\"ComposerBody-copyright\" onclick={makeComposerBountyInput(this)}>\r\n                    <span className={classList('CopyrightLabel', !this.composer.fields.copyright && 'none')}>\r\n                        {app.translator.trans(`xypp-copyright-card.forum.select-copyright`)}\r\n                    </span>\r\n                </a>,\r\n                1\r\n            );\r\n        }\r\n    });\r\n\r\n    extend(DiscussionComposer.prototype, 'data', function (data) {\r\n        if (this.composer?.fields?.copyright) {\r\n            data.copyright = this.composer?.fields?.copyright;\r\n        }\r\n    });\r\n}","import CommentPost from \"flarum/forum/components/CommentPost\";\r\nimport { extend } from 'flarum/common/extend';\r\nimport { CopyrightCard } from \"./components/CopyrightCard\";\r\nimport app from \"flarum/forum/app\";\r\nimport Model from \"flarum/common/Model\";\r\nimport DiscussionListItem from \"flarum/forum/components/DiscussionListItem\";\r\nimport { COPYRIGHT_DATA, COPYRIGHT_TYPE } from \"../common/config\";\r\nimport Discussion from \"flarum/common/models/Discussion\";\r\nimport classList from \"flarum/common/utils/classList\";\r\n\r\nexport function addDiscussion() {\r\n    extend(CommentPost.prototype, 'bodyItems', function (items) {\r\n        const discussion = this.attrs.post.discussion();\r\n        let hasTag = false;\r\n        if (flarum.extensions['flarum-tags']) {\r\n            const tags = discussion.tags();\r\n            const force = app.forum.attribute<string[]>(\"xypp-copyright-card.force-tag\") || [];\r\n            hasTag = !!(tags && tags.find((e: Model | undefined) => e && force.includes(e.id() + \"\")));\r\n        }\r\n        if ((discussion && this.attrs.post && this.attrs.post.number() == 1)) {\r\n            const copyright = discussion.attribute(\"copyright\");\r\n            if (copyright || hasTag) {\r\n                items.add('copyright', CopyrightCard.component({ data: copyright }), 10000);\r\n            }\r\n        }\r\n    });\r\n\r\n    extend(DiscussionListItem.prototype, 'mainItems', function (items) {\r\n        const discussion = this.attrs.discussion as Discussion;\r\n        const copyright = discussion.attribute<{ current: COPYRIGHT_TYPE, all: COPYRIGHT_DATA[] }>(\"copyright\");\r\n        if (copyright) {\r\n            const title = items.get('title');\r\n\r\n            items.add('title', <div className=\"copyright-title\">\r\n                <div className={classList(\"copyright-prefix\", copyright.current)}>\r\n                    {app.translator.trans('xypp-copyright-card.forum.prefix.' + copyright.current)}\r\n                </div>\r\n                {title}\r\n            </div>, items.getPriority('title'));\r\n        }\r\n    })\r\n}","import Component from \"flarum/common/Component\";\r\nimport { COPYRIGHT_DATA, COPYRIGHT_TYPE } from \"../../common/config\";\r\nimport classList from 'flarum/common/utils/classList';\r\nimport app from \"flarum/forum/app\";\r\nimport ItemList from \"flarum/common/utils/ItemList\";\r\nimport { CopyrightPiece } from \"./CopyrightPiece\";\r\n\r\nexport class CopyrightCard extends Component<{ data: { current: COPYRIGHT_TYPE, all: COPYRIGHT_DATA[] } | null }> {\r\n    view(vnode: any) {\r\n        return <div className={classList(\"copyright-card\", this.attrs.data?.current || \"none\")}>\r\n            <div className=\"copyright-current-type\">\r\n                <i class=\"fas fa-copyright\"></i>\r\n                {app.translator.trans(`xypp-copyright-card.forum.current.${this.attrs.data?.current || \"none\"}`)}\r\n            </div>\r\n            <div>\r\n                {this.pieces().toArray()}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    pieces() {\r\n        const items = new ItemList();\r\n        if (!this.attrs.data) return items;\r\n\r\n        this.attrs.data.all.forEach((data, i) => {\r\n            items.add(i + \"\", <CopyrightPiece data={data} first={i == 0 && data.type == this.attrs.data?.current} />);\r\n        });\r\n\r\n        return items;\r\n    }\r\n}","import Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport app from 'flarum/forum/app';\r\nimport { COPYRIGHT_DATA, COPYRIGHT_TYPE } from '../../common/config';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport extractText from 'flarum/common/utils/extractText';\r\nimport Select from 'flarum/common/components/Select';\r\nimport classList from 'flarum/common/utils/classList';\r\nimport { CopyrightPiece } from './CopyrightPiece';\r\nimport CopyrightPieceConfigModal from './CopyrightPieceConfigModal';\r\n\r\n\r\nexport default class CopyrightConfigModal extends Modal<{ value: { current: COPYRIGHT_TYPE, all: COPYRIGHT_DATA[] } | null, onchange: (a: { current: COPYRIGHT_TYPE, all: COPYRIGHT_DATA[] }|null) => void } & IInternalModalAttrs> {\r\n    values: COPYRIGHT_DATA[] = [];\r\n    current: Stream<COPYRIGHT_TYPE> = Stream(COPYRIGHT_TYPE.original);\r\n    typeOpt: Partial<Record<COPYRIGHT_TYPE, string>> = {};\r\n    oninit(vnode: any) {\r\n        super.oninit(vnode);\r\n        this.values = this.attrs.value?.all || [];\r\n        this.current(this.attrs.value?.current || COPYRIGHT_TYPE.original);\r\n        for (const key in COPYRIGHT_TYPE) {\r\n            this.typeOpt[key as COPYRIGHT_TYPE] = extractText(app.translator.trans(`xypp-copyright-card.forum.current.${key}`));\r\n        }\r\n    }\r\n\r\n    className() {\r\n        return 'Modal Modal--small';\r\n    }\r\n\r\n    title() {\r\n        return app.translator.trans('xypp-copyright-card.forum.modal.title');\r\n    }\r\n\r\n    content() {\r\n        return (\r\n            <div className=\"Modal-body\">\r\n                {this.items().toArray()}\r\n                <Button className=\"Button Button--primary Button--block\" onclick={this.onsubmit.bind(this)}>\r\n                    {app.translator.trans('xypp-copyright-card.forum.config.submit')}\r\n                </Button>\r\n                <Button className=\"Button Button--block Button--danger\" onclick={this.clear.bind(this)}>\r\n                    {app.translator.trans('xypp-copyright-card.forum.config.clear')}\r\n                </Button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    items() {\r\n        const item = new ItemList();\r\n        item.add(\"current\",\r\n            <div className=\"Form-group\">\r\n                <label for=\"xypp-copyright-current\">{app.translator.trans('xypp-copyright-card.forum.config.current')}</label>\r\n                <Select id=\"xypp-copyright-current\" options={this.typeOpt} onchange={this.current} value={this.current()} />\r\n            </div>\r\n        )\r\n\r\n        this.values.forEach((piece, i) => item.add(\"piece-\" + i, this.piece(piece, i)));\r\n\r\n        item.add(\"add\", <Button className=\"Button Button--block\" onclick={this.add.bind(this)}>{app.translator.trans('xypp-copyright-card.forum.config.add')}</Button>);\r\n        return item;\r\n    }\r\n    piece(value: COPYRIGHT_DATA, i: number) {\r\n        return <div className=\"config-piece\">\r\n            <CopyrightPiece data={value} />\r\n            <div>\r\n                <Button className=\"Button Button--block\" onclick={this.remove(i)}>\r\n                    {app.translator.trans('xypp-copyright-card.forum.config.remove')}\r\n                </Button>\r\n                <Button className=\"Button Button--block\" onclick={this.edit(i)}>\r\n                    {app.translator.trans('xypp-copyright-card.forum.config.edit')}\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    onsubmit(e: any) {\r\n        e.preventDefault();\r\n        const result: { current: COPYRIGHT_TYPE, all: COPYRIGHT_DATA[] } = {\r\n            current: this.current(),\r\n            all: this.values\r\n        }\r\n        this.attrs.onchange(result);\r\n        app.modal.close();\r\n    }\r\n    clear() {\r\n        this.attrs.onchange(null);\r\n        app.modal.close();\r\n    }\r\n    remove(i: number) {\r\n        return (() => {\r\n            this.values.splice(i, 1);\r\n            m.redraw();\r\n        }).bind(this)\r\n    }\r\n\r\n    edit(i: number) {\r\n        return (() => {\r\n            app.modal.show(CopyrightPieceConfigModal, {\r\n                value: this.values[i],\r\n                onchange:((value: COPYRIGHT_DATA) => {\r\n                    this.values[i] = value;\r\n                    m.redraw();\r\n                }).bind(this)\r\n            },true);\r\n        }).bind(this);\r\n    }\r\n    add() {\r\n        this.values.push({\r\n            type: COPYRIGHT_TYPE.original,\r\n            author: '',\r\n            license: '',\r\n            title: '',\r\n            url: ''\r\n        });\r\n        m.redraw();\r\n    }\r\n}","import Component from \"flarum/common/Component\";\r\nimport { COPYRIGHT_DATA } from \"../../common/config\";\r\nimport classList from 'flarum/common/utils/classList';\r\nimport app from \"flarum/forum/app\";\r\nimport ItemList from \"flarum/common/utils/ItemList\";\r\n\r\nexport class CopyrightPiece extends Component<{ data: COPYRIGHT_DATA, first: boolean }> {\r\n    view(vnode: any) {\r\n        return <div className={classList(\"copyright-piece\", this.attrs.data.type)}>\r\n            {this.attrs.first ? \"\" :\r\n                <div className=\"copyright-piece-type\">\r\n                    {app.translator.trans(`xypp-copyright-card.forum.type.${this.attrs.data.type}`)}\r\n                </div>\r\n            }\r\n            <div className=\"copyright-piece-content\">\r\n                {this.content().toArray()}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    content() {\r\n        const items = new ItemList();\r\n\r\n        if (this.attrs.data.author) {\r\n            items.add(\"author\", <div>{app.translator.trans('xypp-copyright-card.forum.copyright.author', { author: this.attrs.data.author })}</div>);\r\n        }\r\n        if (this.attrs.data.title) {\r\n            items.add(\"title\", <div>{app.translator.trans('xypp-copyright-card.forum.copyright.title', { title: this.attrs.data.title })}</div>);\r\n        }\r\n        if (this.attrs.data.url) {\r\n            items.add(\"url\", <div>{app.translator.trans('xypp-copyright-card.forum.copyright.url', { url: this.attrs.data.url, a: <a href={this.attrs.data.url} target=\"_blank\" /> })}</div>);\r\n        }\r\n        if (this.attrs.data.license) {\r\n            items.add(\"license\", <div>{app.translator.trans('xypp-copyright-card.forum.copyright.license', { license: this.attrs.data.license })}</div>);\r\n        }\r\n\r\n        return items;\r\n    }\r\n}","import Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport app from 'flarum/forum/app';\r\nimport { COPYRIGHT_DATA, COPYRIGHT_KEYS, COPYRIGHT_TYPE } from '../../common/config';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport extractText from 'flarum/common/utils/extractText';\r\nimport Select from 'flarum/common/components/Select';\r\n\r\nexport default class CopyrightPieceConfigModal extends Modal<{\r\n  value: COPYRIGHT_DATA;\r\n  onchange: (value: COPYRIGHT_DATA) => void;\r\n} & IInternalModalAttrs> {\r\n  type: Stream<COPYRIGHT_TYPE>;\r\n  values: Partial<Record<COPYRIGHT_KEYS, Stream<string>>> = {};\r\n  typeOpt: Partial<Record<COPYRIGHT_TYPE, string>> = {};\r\n  oninit(vnode: any) {\r\n    super.oninit(vnode);\r\n\r\n    this.type = Stream(this.attrs.value.type || COPYRIGHT_TYPE.original);\r\n\r\n    for (const key in COPYRIGHT_KEYS) {\r\n      this.values[key as COPYRIGHT_KEYS] = Stream(this.attrs.value[key as COPYRIGHT_KEYS] || '');\r\n    }\r\n\r\n    for (const key in COPYRIGHT_TYPE) {\r\n      this.typeOpt[key as COPYRIGHT_TYPE] = extractText(app.translator.trans(`xypp-copyright-card.forum.type.${key}`));\r\n    }\r\n  }\r\n\r\n  className() {\r\n    return 'Modal Modal--small';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('xypp-copyright-card.forum.piece.piece');\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          {this.fields().toArray()}\r\n          <div className=\"Form-group\">\r\n            <Button className=\"Button Button--primary Button--block\" onclick={this.onsubmit.bind(this)}>\r\n              {app.translator.trans('xypp-copyright-card.forum.piece.submit')}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  fields() {\r\n    const list = new ItemList<JSX.Element>();\r\n\r\n    list.add('type',\r\n      <div className=\"Form-group\">\r\n        <label for=\"xypp-copyright-type\">{app.translator.trans('xypp-copyright-card.forum.piece.type')}</label>\r\n        <Select id=\"xypp-copyright-type\" options={this.typeOpt} value={this.type()} onchange={this.type} />\r\n      </div>\r\n    )\r\n\r\n    for (const key in COPYRIGHT_KEYS) {\r\n      const k = key as COPYRIGHT_KEYS;\r\n      list.add(k,\r\n        <div className=\"Form-group\">\r\n          <label for={`xypp-copyright-${k}`}>{app.translator.trans(`xypp-copyright-card.forum.piece.${k}`)}</label>\r\n          <input id={`xypp-copyright-${k}`} required className=\"FormControl\" type=\"text\" bidi={this.values[k]} />\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return list;\r\n  }\r\n\r\n  onsubmit(e: any) {\r\n    e.preventDefault();\r\n    const value: COPYRIGHT_DATA = {\r\n      type: this.type(),\r\n    };\r\n    for (const key in COPYRIGHT_KEYS) {\r\n      const k = key as COPYRIGHT_KEYS;\r\n      if (this.values[k]())\r\n        value[k] = this.values[k]();\r\n    }\r\n    this.attrs.onchange(value);\r\n    app.modal.close();\r\n  }\r\n}","import app from 'flarum/forum/app';\nimport { addDiscussion } from './addDiscussion';\nimport addDiscussionAction from './addCopyrightComponent';\n\napp.initializers.add('xypp/flarum-copyright-card', () => {\n  addDiscussion();\n  addDiscussionAction();\n});\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/app'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Select'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/classList'];","module.exports = flarum.core.compat['common/utils/extractText'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/CommentPost'];","module.exports = flarum.core.compat['forum/components/DiscussionComposer'];","module.exports = flarum.core.compat['forum/components/DiscussionListItem'];","module.exports = flarum.core.compat['forum/utils/DiscussionControls'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/common';\nexport * from './src/forum';\n"],"names":["COPYRIGHT_KEYS","COPYRIGHT_TYPE","app","initializers","add","console","log","DiscussionControls","extend","Button","CopyrightConfigModal","DiscussionComposer","classList","makeComposerBountyInput","composer","modal","show","value","fields","copyright","onchange","addDiscussionAction","items","discussion","attribute","component","icon","className","onclick","save","translator","trans","prototype","canSet","tags","find","e","m","data","_this$composer","_this$composer2","CommentPost","CopyrightCard","DiscussionListItem","addDiscussion","attrs","post","hasTag","flarum","extensions","force","forum","includes","id","number","title","get","current","getPriority","Component","ItemList","CopyrightPiece","_Component","apply","arguments","_inheritsLoose","_proto","view","vnode","_this$attrs$data","_this$attrs$data2","pieces","toArray","_this","all","forEach","i","_this$attrs$data3","first","type","Modal","Stream","extractText","Select","CopyrightPieceConfigModal","_Modal","_len","length","args","Array","_key","call","concat","values","original","typeOpt","oninit","_this$attrs$value","_this$attrs$value2","key","content","onsubmit","bind","clear","_this2","item","options","piece","remove","edit","preventDefault","result","close","_this3","splice","redraw","_this4","push","author","license","url","default","a","href","target","list","k","required","bidi","setPrototypeOf","t","o","Object","create","constructor","_setPrototypeOf","__proto__"],"sourceRoot":""}